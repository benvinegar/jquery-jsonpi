<!DOCTYPE html>
<html>
	<head>
		<title>JSONPI Example</title>
		<script type="text/javascript" src="/jquery.js"></script>
		<script type="text/javascript" src="jquery.jsonpi.js"></script>
		<script type="text/javascript" src="jquery.upload.js"></script>
		<script type="text/javascript">
			$( function () {
				function logAjax ( resquest ) {
					//resquest.complete( function () { console.log( 'complete', arguments ); } );
					resquest.success( function () { console.log( 'success', arguments ); } );
					resquest.fail( function () { console.log( 'fail', arguments ); } );
				}
				//$.support.cors = false;
				logAjax(
					$.ajax( {
						url	       : 'http://test.' + document.location.hostname + '/jquery-jsonpi/echo.php'
						, dataType : 'jsonpi'
						, data   : { foo: 'bar' }
					} )
					//.abort()
				 );
				logAjax(
					$.ajax( {
						url	       : 'http://test.' + document.location.hostname + '/jquery-jsonpi/echo.php'
						, type	   : 'post'
						, dataType : 'jsonpi'
						, data   : { foo: 'bar' }
					} )
					//.abort()
				);
				$( 'form' ).submit( function () {
					logAjax(
						$.ajax( {
							url	       : this.action
							, type	   : this.method
							, dataType : 'jsonpi'
							, data   : $( ':input', this )
							//, data   : this
							, processData : false
						} )
					);
					return false;
				} );
			} );
		</script>
	</head>
	<body>
		<h1>JSONPI Example</h1>
		<p>This page initiates a JSONPI request using the bundled jQuery transport. Check the console for output.</p>
		<form action="http://test.test.telegraph.co.uk/jquery-jsonpi/echo.php" method="post" enctype="multipart/form-data">
			<label><input type="radio" name="choice" value="yes"/> yes</label>
			<label><input type="radio" name="choice" value="no"/> no</label>
			<input type="text" name="writing"/>
			<input type="file" name="upload[]" multiple="multiple"/>
			<button type="submit">Send</button>
		</form>
	</body>
</html>